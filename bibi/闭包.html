<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <button>按钮1</button>
  <button>按钮2</button>
  <button>按钮3</button>

   <!-- 
    1.如何产生闭包？
      当一个全套当内部（子）函数引用了嵌套当外部（父）函数当变量（函数）时候，就产生闭包
    2.闭包到底是什么？
      理解1:闭包是嵌套的内部函数
      理解2:包含被引用变量（函数）的对象
      注意：闭包存在于嵌套的内部函数中
    3.产生闭包的条件？
      函数嵌套，
      内部函数引用了外部函数的数据（变量／函数）
      执行外部函数定义
  
  
  -->
  <script>
    var btns = document.getElementsByTagName("button")
    // for (var index = 0, length = btns.length; index < length; index++) {
    //   const btn = btns[index];
    //   btn.onclick = function () {
    //     console.log("点击了" + (index + 1));//3
    //   }
    // }

    // for (var index = 0, length = btns.length; index < length; index++) {
    //   const btn = btns[index];
    //   btn.i = index
    //   btn.onclick = function () {
    //     console.log("点击了" + ((btn.i + 1));//1,2,3
    //   }
    // }

    // 闭包
    // index全局
    for (var index = 0, length = btns.length; index < length; index++) {
      (function (i) {
        // i 局部
        const btn = btns[i];
        btn.onclick = function () {
          console.log("点击了" + (i + 1));//1,2,3
        }
      })(index)
      console.log(index);//3
    }

    function fn1(){
      var a=2;
      var b="aaa"
      function fn2(){// 执行函数定义就会产生闭包（不用调用函数）
        console.log(a);
      }
      fn2()
    }
    fn1()
  </script>
</body>

</html>